# commune/chatops 开发计划

## 关联开发文档

- 暂无

## 设定目标


- 为什么用对话
    - 唯一入口
    - 意图直达
- 对标
    - botkit
    - hubot
- 核心用途
    - 对话查询 (主动)
    - 对话控制 (主动)
    - 对话通知 (被动)
        - 事件通知
        - 报警监控
        - 被动触发任务流
    - 对话记忆 (主动)
        - 多轮对话 - 录制操作宏
        - 文本内容 - 录制知识
- 基本功能
    - 对话式查询
        - 意图直接命中
        - 基于配置自动发现的查询
    - 对话式控制
        - 基于命令行的控制
            - 用户域命令行
            - 管理员命令行
            - 上下文相关命令行
        - 多轮对话任务
            - 可编辑的多轮对话
            - 通过 Service 注解自动生成的多轮对话
                - 对二次调用的封装.
            - 异步非阻塞 Service
    - 项目配置
        - 无依赖启动
        - redis + mysql 启动
        - 对话式安装
    - 服务端
        - http 回调端: 用于封装各种服务的回调.
        - 钉钉端: 对接钉钉
        - 网页: 对话展示网页功能?
    - 自然语言
        - 轻量级的知识库问答
    - 对话机器人自管理
        - 能力树
    - 后台 ?
- 预期对接服务
    - 钉钉
        - 群内多进程对话: 允许开设私有对话进程
    - github
    - k8s
- 生产环境改造 (?)
    - 路由埋点
- 文档
- 优势
    - 命令行与对话
    - 注释自动生成多轮对话
    - 复杂多轮对话
    - 异步非阻塞任务
    - 多进程对话
    - 轻量级的自然语言识别

## 开发任务分解

- 对话内核
    - 注解自动生成多轮对话
    - 语境相关命令行机制
    - 对话多进程管理
        - folk
        - switch
    - 对话路由独立封装
    - Context Entity 匹配 (高语义/低语义)
    - 能力树
    - 明确不依赖自然语言理解的 spell 机制
    - 录制语境相关宏
        - micro:list
        - micro:record
        - micro:run {name} -vvv
    - 对话语境封装成网页
    - context 准入机制
- 平台
    - 钉钉对接
    - k8s 对接
    - github 对接
    - 基础回调机制
- 架构
    - 对话式启动
    - 目录调整
- 应用
- 文档


## 开发路线图

1. 调研
    - 当前 chatops 主要功能: 基本都仅仅引入命令行而已
    - github 可对接功能
    - 钉钉可对接功能
    - k8s 对接策略
1. 内核开发/1  (1d)
    - 注释自动生成多轮对话
    - 确认语境相关命令行机制
1. 对接服务/1  (4d)
    - 钉钉 platform (重点)
        - 多房间 - 群 配置
        - 事件监控
    - web hook platform
    - 网页版前端?
    - 网页版后台?
    - 网页版对话监控?
    - 钉钉 网页版对话调试工具?
1. 内核开发/2 (3d)
    - 机器人能力管理 (网页呈现能力树?)
    - 对话多进程管理
    - spell 功能梳理
    - 宏?
    - 对话语境封装成网页
    - 解决 tcp 协程 ghost 异步任务不稳定的问题
1. 应用功能开发 (3d)
    - 轻量级问答
    - github 通知
    - sentry 通知
    - 模拟钉钉 任务
    - 模拟k8s 任务
1. 应用测试 & 框架梳理
1. 发版


时间永远都是不够的, 目前只有 10个工作日可用, 争取国庆假期结束后发布.